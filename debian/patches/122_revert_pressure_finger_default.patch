From c31cbe1a856dd6a1093469091d90ac12619b6244 Mon Sep 17 00:00:00 2001
From: Chase Douglas <chase.douglas@canonical.com>
Date: Wed, 30 Mar 2011 10:47:13 -0400
Subject: [PATCH] Revert "Default to 2-finger emulation when HW supports it"

The default pressure threshold set by this patch is low enough to cause
spurious behavior in some devices. One bug report also notes that the
pressure values seem to vary with environment state (temperature,
air pressure, etc.). Thus, this commit is being reverted to restore
behavior to what it was before Natty.

This reverts upstream commit ffa6dc2809734a6aaa690e9133d6761480603a68.

Fixes LP: #742213

Reported-by: steubens (https://launchpad.net/~d-launchpad-lez-ath-cx)
Signed-off-by: Chase Douglas <chase.douglas@canonical.com>
---
 src/synaptics.c |    7 +------
 1 files changed, 1 insertions(+), 6 deletions(-)

Index: xserver-xorg-input-synaptics/src/synaptics.c
===================================================================
--- xserver-xorg-input-synaptics.orig/src/synaptics.c	2011-12-19 11:16:14.000000000 +1100
+++ xserver-xorg-input-synaptics/src/synaptics.c	2011-12-19 11:24:53.746135268 +1100
@@ -459,6 +459,12 @@
 
     range = priv->maxw - priv->minw + 1;
 
+    /* Enable emulation when hw supports both pressure and width. */
+    if (!priv->has_double && priv->has_width)
+	emulateTwoFingerMinZ = fingerHigh;
+    else
+	emulateTwoFingerMinZ = priv->minp + range * (282.0/256);
+
     /* scaling based on defaults below and a tool width of 16 */
     palmMinWidth = priv->minw + range * (10.0/16);
     emulateTwoFingerMinW = priv->minw + range * (7.0/16);
